(self["webpackChunkdocx"]=self["webpackChunkdocx"]||[]).push([[92],{6419:(e,l,s)=>{"use strict";s.d(l,{Z:()=>i});const a=new RegExp("^[+-]?\\d+(\\.\\d+)?$"),t=new RegExp(/^\S+$/),r=new RegExp(/^[a-zA-Zа-яА-Я]+$/),o=new RegExp(/^[a-zA-Z]+$/),u=new RegExp(/^[a-zA-Z_]+$/),n=4,d=6;class m{alpha(){return e=>o.test(e)||"Поле может содержать только латинские буквы"}username(){return e=>u.test(e)&&this.lengthGreater(n-1)(e)||"Логин невалиден"}password(){return e=>t.test(e)&&this.lengthGreater(d-1)(e)||"Пароль невалиден"}alphaWithRus(){return e=>r.test(e)||"Поле может содержать только буквы"}withoutSpaces(){return e=>t.test(e)||"Поле не должно содержать пробелы"}required(){return e=>!!e||"Поле обязательное"}requiredWithZero(){return e=>!!e||"0"==e||"Поле обязательное"}lengthLess(e){return null==e&&console.warn("len in lengthLess is null"),l=>l.length<e||`Поле должно быть меньше ${e} символов`}lengthGreater(e){return null==e&&console.warn("len in lengthGreater is null"),l=>l.length>e||`Поле должно быть больше ${e} символов`}lengthEquals(e){return null==e&&console.warn("len in lengthEquals is null"),l=>l.length===e||`Поле должно состоять из ${e} символов`}passwordLength(){return e=>e.length>=6||"Пароль должен быть больше 6 символов"}number(){return e=>a.test(e)||"Поле должно быть числом"}numberLess(e){return null==e&&console.warn("max in numberLess is null"),l=>l<e||`Поле должно быть меньше чем ${e}`}numberBetweenNotStrictScore(e,l){return null==e&&console.warn("min in numberBetweenNotStrict is null}"),null==l&&console.warn("max in numberBetweenNotStrict is null"),s=>s>=e&&s<=l||0==s||`Min ${e}, Max ${l}`}}const p=new m,i=p},3383:(e,l,s)=>{"use strict";s.d(l,{K:()=>a,n:()=>t});class a{constructor(e,l){this.password=e,this.username=l}}class t{constructor(e,l,s,a,t,r,o,u,n){this.chairman=l||{},this.firstName=s,this.id=a,this.lastName=t,this.middleName=r,this.password=o,this.roles=u||[],this.username=n,this.token=e}}},4092:(e,l,s)=>{"use strict";s.r(l),s.d(l,{default:()=>ge});var a=s(3673);function t(e,l,s,t,r,o){const u=(0,a.up)("admin-tabs"),n=(0,a.up)("q-page");return(0,a.wg)(),(0,a.j4)(n,null,{default:(0,a.w5)((()=>[(0,a.Wm)(u)])),_:1})}var r=s(2925);const o={class:"q-gutter-y-md"};function u(e,l,s,t,r,u){const n=(0,a.up)("q-tab"),d=(0,a.up)("q-tabs"),m=(0,a.up)("new-user-form"),p=(0,a.up)("q-tab-panel"),i=(0,a.up)("update-user-info-table"),c=(0,a.up)("update-user-password-table"),w=(0,a.up)("update-user-roles-table"),f=(0,a.up)("update-user-chairman-table"),W=(0,a.up)("q-tab-panels");return(0,a.wg)(),(0,a.j4)("div",o,[(0,a.Wm)(d,{modelValue:e.tab,"onUpdate:modelValue":l[1]||(l[1]=l=>e.tab=l),class:"text-accent",align:"justify","narrow-indicator":""},{default:(0,a.w5)((()=>[(0,a.Wm)(n,{name:"createUser",icon:"fas fa-user",label:"Зарегистировать"}),(0,a.Wm)(n,{name:"info",icon:"fas fa-user",label:"Данные"}),(0,a.Wm)(n,{name:"password",icon:"password",label:"Пароли"}),(0,a.Wm)(n,{name:"roles",icon:"fas fa-user-shield",label:"Роли"}),(0,a.Wm)(n,{name:"chairman",icon:"fas fa-user-friends",label:"Председатели"})])),_:1},8,["modelValue"]),(0,a.Wm)(W,{"keep-alive":"",modelValue:e.tab,"onUpdate:modelValue":l[2]||(l[2]=l=>e.tab=l),animated:"",class:"main_background","transition-prev":"jump-up","transition-next":"jump-up"},{default:(0,a.w5)((()=>[(0,a.Wm)(p,{name:"createUser"},{default:(0,a.w5)((()=>[(0,a.Wm)(m)])),_:1}),(0,a.Wm)(p,{name:"info"},{default:(0,a.w5)((()=>[(0,a.Wm)(i)])),_:1}),(0,a.Wm)(p,{name:"password"},{default:(0,a.w5)((()=>[(0,a.Wm)(c)])),_:1}),(0,a.Wm)(p,{name:"roles"},{default:(0,a.w5)((()=>[(0,a.Wm)(w)])),_:1}),(0,a.Wm)(p,{name:"chairman"},{default:(0,a.w5)((()=>[(0,a.Wm)(f)])),_:1})])),_:1},8,["modelValue"])])}const n=(0,a.Wm)("div",null,[(0,a.Wm)("h4",{class:"q-ma-none"},[(0,a.Wm)("strong",null,"Новый пользователь")])],-1),d={class:"row justify-end "};function m(e,l,s,t,r,o){const u=(0,a.up)("q-input"),m=(0,a.up)("q-btn"),p=(0,a.up)("q-form"),i=(0,a.up)("q-card");return(0,a.wg)(),(0,a.j4)(i,null,{default:(0,a.w5)((()=>[(0,a.Wm)(p,{class:"q-gutter-md q-ma-md",onSubmit:e.onSubmit},{default:(0,a.w5)((()=>[n,(0,a.Wm)(u,{type:"text",label:"Логин",rules:[e.ruleApi.required(),e.ruleApi.username()],modelValue:e.user.username,"onUpdate:modelValue":l[1]||(l[1]=l=>e.user.username=l)},null,8,["rules","modelValue"]),(0,a.Wm)(u,{type:"password",label:"Пароль",modelValue:e.user.password,"onUpdate:modelValue":l[2]||(l[2]=l=>e.user.password=l),rules:[e.ruleApi.required(),e.ruleApi.password()]},null,8,["modelValue","rules"]),(0,a.Wm)(u,{type:"text",label:"Фамилия",modelValue:e.user.lastName,"onUpdate:modelValue":l[3]||(l[3]=l=>e.user.lastName=l),rules:[e.ruleApi.required(),e.ruleApi.alphaWithRus]},null,8,["modelValue","rules"]),(0,a.Wm)(u,{type:"text",label:"Имя",modelValue:e.user.firstName,"onUpdate:modelValue":l[4]||(l[4]=l=>e.user.firstName=l),rules:[e.ruleApi.required(),e.ruleApi.alphaWithRus()]},null,8,["modelValue","rules"]),(0,a.Wm)(u,{type:"text",label:"Отчество",modelValue:e.user.middleName,"onUpdate:modelValue":l[5]||(l[5]=l=>e.user.middleName=l),rules:[e.ruleApi.required(),e.ruleApi.alphaWithRus()]},null,8,["modelValue","rules"]),(0,a.Wm)("div",d,[(0,a.Wm)(m,{label:"Зарегистировать",loading:e.loading,type:"submit",icon:"login",unelevated:"",flat:"",color:"accent",class:"login_btn_tmp"},null,8,["loading"])])])),_:1},8,["onSubmit"])])),_:1})}s(9544);var p=s(1959),i=s(6419),c=s(3383),w=s(3406);const f=(0,a.aZ)({name:"NewUserForm",setup(){const e=(0,p.iH)(!1),l=(0,r.useStore)(),s=(0,p.iH)(new c.n);function a(){e.value=!0,setTimeout((()=>{l.dispatch("user/createUser",s.value).then((e=>{e&&(w.Z.showPositive("Пользователь успешно создан"),s.value=new c.n)})).finally((()=>e.value=!1))}),300)}return{loading:e,user:s,ruleApi:i.Z,onSubmit:a}}});var W=s(151),h=s(5269),g=s(4842),b=s(8240),_=s(7518),U=s.n(_);f.render=m;const q=f;U()(f,"components",{QCard:W.Z,QForm:h.Z,QInput:g.Z,QBtn:b.Z});var Z=s(2323),y=s(1813),k=s.n(y);const V={class:"full-width row flex-center text-accent q-gutter-sm text-h6"},N=(0,a.Wm)("div",{class:"text-h6"},"Изменить Данные",-1),Q={class:"row q-gutter-md q-ma-md"};function v(e,l,s,t,r,o){const u=(0,a.up)("q-icon"),n=(0,a.up)("q-input"),d=(0,a.up)("q-tr"),m=(0,a.up)("q-td"),p=(0,a.up)("q-btn"),i=(0,a.up)("q-img"),c=(0,a.up)("q-table"),w=(0,a.up)("q-card-section"),f=(0,a.up)("q-card-actions"),W=(0,a.up)("q-form"),h=(0,a.up)("q-card"),g=(0,a.up)("q-dialog");return(0,a.wg)(),(0,a.j4)(a.HY,null,[(0,a.Wm)(c,{title:"Изменить данные","no-data-label":"у нас нет никого","no-results-label":"мы ничего не нашли",filter:e.filter,rows:e.rows,columns:e.columns,"row-key":"name","binary-state-sort":""},{"top-right":(0,a.w5)((()=>[(0,a.Wm)(n,{borderless:"",dense:"",debounce:"300",modelValue:e.filter,"onUpdate:modelValue":l[1]||(l[1]=l=>e.filter=l),placeholder:"Поиск",style:{"min-width":"250px"}},{append:(0,a.w5)((()=>[(0,a.Wm)(u,{name:"search"})])),_:1},8,["modelValue"])])),body:(0,a.w5)((l=>[(0,a.Wm)(d,{props:l},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{key:"id",props:l},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{props:l,dense:"",autofocus:""},{default:(0,a.w5)((()=>[(0,a.Uk)((0,Z.zw)(l.row.id),1)])),_:2},1032,["props"])])),_:2},1032,["props"]),(0,a.Wm)(m,{key:"username",props:l},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{props:l,dense:"",autofocus:""},{default:(0,a.w5)((()=>[(0,a.Uk)((0,Z.zw)(l.row.username),1)])),_:2},1032,["props"])])),_:2},1032,["props"]),(0,a.Wm)(m,{key:"firstName",props:l},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{props:l,dense:"",autofocus:""},{default:(0,a.w5)((()=>[(0,a.Uk)((0,Z.zw)(l.row.firstName),1)])),_:2},1032,["props"])])),_:2},1032,["props"]),(0,a.Wm)(m,{key:"lastName",props:l},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{props:l,dense:"",autofocus:""},{default:(0,a.w5)((()=>[(0,a.Uk)((0,Z.zw)(l.row.lastName),1)])),_:2},1032,["props"])])),_:2},1032,["props"]),(0,a.Wm)(m,{key:"middleName",props:l},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{props:l,dense:"",autofocus:""},{default:(0,a.w5)((()=>[(0,a.Uk)((0,Z.zw)(l.row.middleName),1)])),_:2},1032,["props"])])),_:2},1032,["props"]),(0,a.Wm)(m,{key:"actions",props:l,"auto-width":""},{default:(0,a.w5)((()=>[(0,a.Wm)(p,{color:"blue",label:"Изменить Данные",onClick:s=>e.showEditUserDialog(l.row),size:"sm","no-caps":""},null,8,["onClick"]),(0,a.Wm)(p,{color:"red",label:"Удалить",onClick:s=>e.deleteUserHandler(l.row.id),size:"sm","no-caps":""},null,8,["onClick"])])),_:2},1032,["props"])])),_:2},1032,["props"])])),"no-data":(0,a.w5)((({message:e})=>[(0,a.Wm)("div",V,[(0,a.Wm)(i,{src:k(),style:{width:"64px",height:"64px"}}),(0,a.Wm)("span",null,[(0,a.Wm)("b",null,"Так ужасно что ... "+(0,Z.zw)(e),1)])])])),_:1},8,["filter","rows","columns"]),(0,a.Wm)(g,{modelValue:e.user_dialog,"onUpdate:modelValue":l[6]||(l[6]=l=>e.user_dialog=l)},{default:(0,a.w5)((()=>[(0,a.Wm)(h,{class:"bg-secondary my-card"},{default:(0,a.w5)((()=>[(0,a.Wm)(W,{onSubmit:e.updateUserInfo},{default:(0,a.w5)((()=>[(0,a.Wm)(w,null,{default:(0,a.w5)((()=>[N])),_:1}),(0,a.Wm)(w,{class:""},{default:(0,a.w5)((()=>[(0,a.Wm)("div",Q,[(0,a.Wm)(n,{class:"col-12 col-md-12 ",type:"text",label:"Логин",modelValue:e.edited_user.username,"onUpdate:modelValue":l[2]||(l[2]=l=>e.edited_user.username=l),rules:[e.ruleApi.required(),e.ruleApi.username()]},null,8,["modelValue","rules"]),(0,a.Wm)(n,{class:"col-12 col-md-12",type:"text",label:"Имя",modelValue:e.edited_user.firstName,"onUpdate:modelValue":l[3]||(l[3]=l=>e.edited_user.firstName=l),rules:[e.ruleApi.required(),e.ruleApi.alphaWithRus(),e.ruleApi.lengthGreater(1)]},null,8,["modelValue","rules"]),(0,a.Wm)(n,{class:"col-12 col-md-12",type:"text",label:"Фамилия",modelValue:e.edited_user.lastName,"onUpdate:modelValue":l[4]||(l[4]=l=>e.edited_user.lastName=l),rules:[e.ruleApi.required(),e.ruleApi.alphaWithRus(),e.ruleApi.lengthGreater(1)]},null,8,["modelValue","rules"]),(0,a.Wm)(n,{class:"col-12 col-md-12",type:"text",label:"Отчество",modelValue:e.edited_user.middleName,"onUpdate:modelValue":l[5]||(l[5]=l=>e.edited_user.middleName=l),rules:[e.ruleApi.required(),e.ruleApi.alphaWithRus(),e.ruleApi.lengthGreater(1)]},null,8,["modelValue","rules"])])])),_:1}),(0,a.Wm)(f,{align:"right"},{default:(0,a.w5)((()=>[(0,a.Wm)(p,{flat:"",label:"Изменить",color:"accent",type:"submit"})])),_:1})])),_:1},8,["onSubmit"])])),_:1})])),_:1},8,["modelValue"])],64)}const x=["id","username","firstName","lastName","middleName","actions"],A=(0,a.aZ)({name:"UpdateUserInfoTable",setup(){const e=(0,r.useStore)(),l=(0,a.Fl)((()=>e.getters["user/getUsers"])),s=(0,a.Fl)((()=>e.getters["user/getColumns"].filter((e=>x.includes(e.name))))),t=(0,p.qj)(new c.n),o=(0,p.iH)(!1),u=(0,p.iH)("");function n(e){o.value=!0,t.id=e.id,t.username=e.username,t.lastName=e.lastName,t.firstName=e.firstName,t.middleName=e.middleName}function d(){e.dispatch("user/updateUserInfo",t).then((e=>{e&&(w.Z.showPositive("Данные успешно измененны"),o.value=!1)}))}function m(l){confirm("Вы подтверждаете удаление?")&&e.dispatch("user/deleteUser",l).then((e=>{e&&w.Z.showPositive("Данные успешно измененны")}))}return{rows:l,columns:s,user_dialog:o,edited_user:t,deleteUserHandler:m,showEditUserDialog:n,updateUserInfo:d,ruleApi:i.Z,filter:u}}});var C=s(6429),z=s(4554),S=s(8186),T=s(3884),F=s(4027),H=s(6778),I=s(5589),R=s(9367);A.render=v;const j=A;U()(A,"components",{QTable:C.Z,QInput:g.Z,QIcon:z.Z,QTr:S.Z,QTd:T.Z,QBtn:b.Z,QImg:F.Z,QDialog:H.Z,QCard:W.Z,QForm:h.Z,QCardSection:I.Z,QCardActions:R.Z});const E={class:"full-width row flex-center text-accent q-gutter-sm text-h6"},P=(0,a.Wm)("div",{class:"text-h6"},"Изменить Пароль",-1),D={class:"row q-gutter-md q-ma-md"};function $(e,l,s,t,r,o){const u=(0,a.up)("q-icon"),n=(0,a.up)("q-input"),d=(0,a.up)("q-tr"),m=(0,a.up)("q-td"),p=(0,a.up)("q-btn"),i=(0,a.up)("q-img"),c=(0,a.up)("q-table"),w=(0,a.up)("q-card-section"),f=(0,a.up)("q-card-actions"),W=(0,a.up)("q-form"),h=(0,a.up)("q-card"),g=(0,a.up)("q-dialog");return(0,a.wg)(),(0,a.j4)(a.HY,null,[(0,a.Wm)(c,{title:"Изменить Пароль","no-data-label":"у нас нет никого","no-results-label":"мы ничего не нашли",filter:e.filter,rows:e.rows,columns:e.columns,"row-key":"id","binary-state-sort":""},{"top-right":(0,a.w5)((()=>[(0,a.Wm)(n,{borderless:"",dense:"",debounce:"300",modelValue:e.filter,"onUpdate:modelValue":l[1]||(l[1]=l=>e.filter=l),placeholder:"Поиск",style:{"min-width":"250px"}},{append:(0,a.w5)((()=>[(0,a.Wm)(u,{name:"search"})])),_:1},8,["modelValue"])])),body:(0,a.w5)((l=>[(0,a.Wm)(d,{props:l},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{key:"id",props:l},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{props:l,dense:"",autofocus:""},{default:(0,a.w5)((()=>[(0,a.Uk)((0,Z.zw)(l.row.id),1)])),_:2},1032,["props"])])),_:2},1032,["props"]),(0,a.Wm)(m,{key:"username",props:l},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{props:l,dense:"",autofocus:""},{default:(0,a.w5)((()=>[(0,a.Uk)((0,Z.zw)(l.row.username),1)])),_:2},1032,["props"])])),_:2},1032,["props"]),(0,a.Wm)(m,{key:"firstName",props:l},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{props:l,dense:"",autofocus:""},{default:(0,a.w5)((()=>[(0,a.Uk)((0,Z.zw)(l.row.firstName),1)])),_:2},1032,["props"])])),_:2},1032,["props"]),(0,a.Wm)(m,{key:"lastName",props:l},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{props:l,dense:"",autofocus:""},{default:(0,a.w5)((()=>[(0,a.Uk)((0,Z.zw)(l.row.lastName),1)])),_:2},1032,["props"])])),_:2},1032,["props"]),(0,a.Wm)(m,{key:"middleName",props:l},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{props:l,dense:"",autofocus:""},{default:(0,a.w5)((()=>[(0,a.Uk)((0,Z.zw)(l.row.middleName),1)])),_:2},1032,["props"])])),_:2},1032,["props"]),(0,a.Wm)(m,{key:"actions",props:l,"auto-width":""},{default:(0,a.w5)((()=>[(0,a.Wm)(p,{color:"blue",label:"Изменить Пароль",onClick:s=>e.showEditUserDialog(l.row),size:"sm","no-caps":""},null,8,["onClick"])])),_:2},1032,["props"])])),_:2},1032,["props"])])),"no-data":(0,a.w5)((({message:e})=>[(0,a.Wm)("div",E,[(0,a.Wm)(i,{src:k(),style:{width:"64px",height:"64px"}}),(0,a.Wm)("span",null,[(0,a.Wm)("b",null,"Так ужасно что ... "+(0,Z.zw)(e),1)])])])),_:1},8,["filter","rows","columns"]),(0,a.Wm)(g,{modelValue:e.user_dialog,"onUpdate:modelValue":l[3]||(l[3]=l=>e.user_dialog=l)},{default:(0,a.w5)((()=>[(0,a.Wm)(h,{class:"bg-secondary my-card"},{default:(0,a.w5)((()=>[(0,a.Wm)(W,{onSubmit:e.updateUserPassword},{default:(0,a.w5)((()=>[(0,a.Wm)(w,null,{default:(0,a.w5)((()=>[P])),_:1}),(0,a.Wm)(w,{class:""},{default:(0,a.w5)((()=>[(0,a.Wm)("div",D,[(0,a.Wm)(n,{class:"col-12 col-md-12 ",type:"text",label:"Пароль",modelValue:e.edited_user.password,"onUpdate:modelValue":l[2]||(l[2]=l=>e.edited_user.password=l),rules:[e.ruleApi.required(),e.ruleApi.password()]},null,8,["modelValue","rules"])])])),_:1}),(0,a.Wm)(f,{align:"right"},{default:(0,a.w5)((()=>[(0,a.Wm)(p,{flat:"",label:"Изменить",color:"accent",type:"submit"})])),_:1})])),_:1},8,["onSubmit"])])),_:1})])),_:1},8,["modelValue"])],64)}const B=["id","username","firstName","lastName","middleName","actions"],G=(0,a.aZ)({name:"UpdateUserPasswordTable",setup(){const e=(0,r.useStore)(),l=(0,a.Fl)((()=>e.getters["user/getUsers"])),s=(0,a.Fl)((()=>e.getters["user/getColumns"].filter((e=>B.includes(e.name))))),t=(0,p.qj)(new c.n),o=(0,p.iH)(!1),u=(0,p.iH)("");function n(e){o.value=!0,t.id=e.id}function d(){e.dispatch("user/updateUserPassword",t).then((e=>{e&&(w.Z.showPositive("Пароль успешно измененн"),o.value=!1)}))}return{rows:l,columns:s,user_dialog:o,edited_user:t,showEditUserDialog:n,updateUserPassword:d,ruleApi:i.Z,filter:u}}});G.render=$;const L=G;U()(G,"components",{QTable:C.Z,QInput:g.Z,QIcon:z.Z,QTr:S.Z,QTd:T.Z,QBtn:b.Z,QImg:F.Z,QDialog:H.Z,QCard:W.Z,QForm:h.Z,QCardSection:I.Z,QCardActions:R.Z});const Y={class:"full-width row flex-center text-accent q-gutter-sm text-h6"},M=(0,a.Wm)("div",{class:"text-h6"},"Изменить Роли",-1),O={class:"row q-gutter-md q-ma-md"};function K(e,l,s,t,r,o){const u=(0,a.up)("q-icon"),n=(0,a.up)("q-input"),d=(0,a.up)("q-tr"),m=(0,a.up)("q-td"),p=(0,a.up)("q-btn"),i=(0,a.up)("q-img"),c=(0,a.up)("q-table"),w=(0,a.up)("q-card-section"),f=(0,a.up)("q-select"),W=(0,a.up)("q-card-actions"),h=(0,a.up)("q-form"),g=(0,a.up)("q-card"),b=(0,a.up)("q-dialog");return(0,a.wg)(),(0,a.j4)(a.HY,null,[(0,a.Wm)(c,{title:"Изменить Роли","no-data-label":"у нас нет никого","no-results-label":"мы ничего не нашли",filter:e.filter,rows:e.rows,columns:e.columns,"row-key":"id","binary-state-sort":""},{"top-right":(0,a.w5)((()=>[(0,a.Wm)(n,{borderless:"",dense:"",debounce:"300",modelValue:e.filter,"onUpdate:modelValue":l[1]||(l[1]=l=>e.filter=l),placeholder:"Поиск",style:{"min-width":"250px"}},{append:(0,a.w5)((()=>[(0,a.Wm)(u,{name:"search"})])),_:1},8,["modelValue"])])),body:(0,a.w5)((l=>[(0,a.Wm)(d,{props:l},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{key:"id",props:l},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{props:l,dense:"",autofocus:""},{default:(0,a.w5)((()=>[(0,a.Uk)((0,Z.zw)(l.row.id),1)])),_:2},1032,["props"])])),_:2},1032,["props"]),(0,a.Wm)(m,{key:"username",props:l},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{props:l,dense:"",autofocus:""},{default:(0,a.w5)((()=>[(0,a.Uk)((0,Z.zw)(l.row.username),1)])),_:2},1032,["props"])])),_:2},1032,["props"]),(0,a.Wm)(m,{key:"firstName",props:l},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{props:l,dense:"",autofocus:""},{default:(0,a.w5)((()=>[(0,a.Uk)((0,Z.zw)(l.row.firstName),1)])),_:2},1032,["props"])])),_:2},1032,["props"]),(0,a.Wm)(m,{key:"lastName",props:l},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{props:l,dense:"",autofocus:""},{default:(0,a.w5)((()=>[(0,a.Uk)((0,Z.zw)(l.row.lastName),1)])),_:2},1032,["props"])])),_:2},1032,["props"]),(0,a.Wm)(m,{key:"middleName",props:l},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{props:l,dense:"",autofocus:""},{default:(0,a.w5)((()=>[(0,a.Uk)((0,Z.zw)(l.row.middleName),1)])),_:2},1032,["props"])])),_:2},1032,["props"]),(0,a.Wm)(m,{key:"roles",props:l},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{props:l,dense:"",autofocus:""},{default:(0,a.w5)((()=>{var e;return[(0,a.Uk)((0,Z.zw)(null===(e=l.row.roles)||void 0===e?void 0:e.map((e=>e.name))),1)]})),_:2},1032,["props"])])),_:2},1032,["props"]),(0,a.Wm)(m,{key:"actions",props:l,"auto-width":""},{default:(0,a.w5)((()=>[(0,a.Wm)(p,{color:"blue",label:"Изменить Роли",onClick:s=>e.showEditUserDialog(l.row),size:"sm","no-caps":""},null,8,["onClick"])])),_:2},1032,["props"])])),_:2},1032,["props"])])),"no-data":(0,a.w5)((({message:e})=>[(0,a.Wm)("div",Y,[(0,a.Wm)(i,{src:k(),style:{width:"64px",height:"64px"}}),(0,a.Wm)("span",null,[(0,a.Wm)("b",null,"Так ужасно что ... "+(0,Z.zw)(e),1)])])])),_:1},8,["filter","rows","columns"]),(0,a.Wm)(b,{modelValue:e.user_dialog,"onUpdate:modelValue":l[3]||(l[3]=l=>e.user_dialog=l)},{default:(0,a.w5)((()=>[(0,a.Wm)(g,{class:"bg-secondary my-card"},{default:(0,a.w5)((()=>[(0,a.Wm)(h,{onSubmit:e.updateUserRoles},{default:(0,a.w5)((()=>[(0,a.Wm)(w,null,{default:(0,a.w5)((()=>[M])),_:1}),(0,a.Wm)(w,{class:""},{default:(0,a.w5)((()=>[(0,a.Wm)("div",O,[(0,a.Wm)(f,{class:"col-12 col-md",modelValue:e.edited_user.roles,"onUpdate:modelValue":l[2]||(l[2]=l=>e.edited_user.roles=l),multiple:"","option-value":"name","option-label":"name",options:e.roleOptions},null,8,["modelValue","options"])])])),_:1}),(0,a.Wm)(W,{align:"right"},{default:(0,a.w5)((()=>[(0,a.Wm)(p,{flat:"",label:"Изменить",color:"accent",type:"submit"})])),_:1})])),_:1},8,["onSubmit"])])),_:1})])),_:1},8,["modelValue"])],64)}const J=["id","username","firstName","lastName","middleName","roles","actions"],X=(0,a.aZ)({name:"UpdateUserRolesTable",setup(){const e=(0,r.useStore)(),l=(0,a.Fl)((()=>e.getters["user/getUsers"])),s=(0,a.Fl)((()=>e.getters["user/getColumns"].filter((e=>J.includes(e.name))))),t=(0,a.Fl)((()=>e.getters["user/getRoleOptions"])),o=(0,p.qj)(new c.n),u=(0,p.iH)(!1),n=(0,p.iH)("");function d(e){u.value=!0,o.id=e.id,o.roles=e.roles||[]}function m(){e.dispatch("user/updateUserRoles",o).then((e=>{e&&(w.Z.showPositive("Роли успешно измененны"),u.value=!1)}))}return{rows:l,columns:s,user_dialog:u,edited_user:o,showEditUserDialog:d,updateUserRoles:m,ruleApi:i.Z,roleOptions:t,filter:n}}});var ee=s(8516);X.render=K;const le=X;U()(X,"components",{QTable:C.Z,QInput:g.Z,QIcon:z.Z,QTr:S.Z,QTd:T.Z,QBtn:b.Z,QImg:F.Z,QDialog:H.Z,QCard:W.Z,QForm:h.Z,QCardSection:I.Z,QSelect:ee.Z,QCardActions:R.Z});const se={class:"full-width row flex-center text-accent q-gutter-sm text-h6"},ae=(0,a.Wm)("div",{class:"text-h6"},"Изменить Председателя",-1),te={class:"row q-gutter-md q-ma-md"};function re(e,l,s,t,r,o){const u=(0,a.up)("q-icon"),n=(0,a.up)("q-input"),d=(0,a.up)("q-tr"),m=(0,a.up)("q-td"),p=(0,a.up)("q-btn"),i=(0,a.up)("q-img"),c=(0,a.up)("q-table"),w=(0,a.up)("q-card-section"),f=(0,a.up)("q-select"),W=(0,a.up)("q-card-actions"),h=(0,a.up)("q-form"),g=(0,a.up)("q-card"),b=(0,a.up)("q-dialog");return(0,a.wg)(),(0,a.j4)(a.HY,null,[(0,a.Wm)(c,{title:"Изменить Председателя","no-data-label":"у нас нет никого","no-results-label":"мы ничего не нашли",filter:e.filter,rows:e.rows,columns:e.columns,"row-key":"id","binary-state-sort":""},{"top-right":(0,a.w5)((()=>[(0,a.Wm)(n,{borderless:"",dense:"",debounce:"300",modelValue:e.filter,"onUpdate:modelValue":l[1]||(l[1]=l=>e.filter=l),placeholder:"Поиск",style:{"min-width":"250px"}},{append:(0,a.w5)((()=>[(0,a.Wm)(u,{name:"search"})])),_:1},8,["modelValue"])])),body:(0,a.w5)((l=>[(0,a.Wm)(d,{props:l},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{key:"id",props:l},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{props:l,dense:"",autofocus:""},{default:(0,a.w5)((()=>[(0,a.Uk)((0,Z.zw)(l.row.id),1)])),_:2},1032,["props"])])),_:2},1032,["props"]),(0,a.Wm)(m,{key:"username",props:l},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{props:l,dense:"",autofocus:""},{default:(0,a.w5)((()=>[(0,a.Uk)((0,Z.zw)(l.row.username),1)])),_:2},1032,["props"])])),_:2},1032,["props"]),(0,a.Wm)(m,{key:"firstName",props:l},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{props:l,dense:"",autofocus:""},{default:(0,a.w5)((()=>[(0,a.Uk)((0,Z.zw)(l.row.firstName),1)])),_:2},1032,["props"])])),_:2},1032,["props"]),(0,a.Wm)(m,{key:"lastName",props:l},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{props:l,dense:"",autofocus:""},{default:(0,a.w5)((()=>[(0,a.Uk)((0,Z.zw)(l.row.lastName),1)])),_:2},1032,["props"])])),_:2},1032,["props"]),(0,a.Wm)(m,{key:"middleName",props:l},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{props:l,dense:"",autofocus:""},{default:(0,a.w5)((()=>[(0,a.Uk)((0,Z.zw)(l.row.middleName),1)])),_:2},1032,["props"])])),_:2},1032,["props"]),(0,a.Wm)(m,{key:"chairman",props:l},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{props:l,dense:"",autofocus:""},{default:(0,a.w5)((()=>[(0,a.Uk)((0,Z.zw)(e.userUtils.getShortFio(l.row.chairman)),1)])),_:2},1032,["props"])])),_:2},1032,["props"]),(0,a.Wm)(m,{key:"actions",props:l,"auto-width":""},{default:(0,a.w5)((()=>[(0,a.Wm)(p,{color:"blue",label:"Изменить Председателя",onClick:s=>e.showEditUserDialog(l.row),size:"sm","no-caps":""},null,8,["onClick"])])),_:2},1032,["props"])])),_:2},1032,["props"])])),"no-data":(0,a.w5)((({message:e})=>[(0,a.Wm)("div",se,[(0,a.Wm)(i,{src:k(),style:{width:"64px",height:"64px"}}),(0,a.Wm)("span",null,[(0,a.Wm)("b",null,"Так ужасно что ... "+(0,Z.zw)(e),1)])])])),_:1},8,["filter","rows","columns"]),(0,a.Wm)(b,{modelValue:e.user_dialog,"onUpdate:modelValue":l[3]||(l[3]=l=>e.user_dialog=l)},{default:(0,a.w5)((()=>[(0,a.Wm)(g,{class:"bg-secondary my-card"},{default:(0,a.w5)((()=>[(0,a.Wm)(h,{onSubmit:e.updateUserChairman},{default:(0,a.w5)((()=>[(0,a.Wm)(w,null,{default:(0,a.w5)((()=>[ae])),_:1}),(0,a.Wm)(w,{class:""},{default:(0,a.w5)((()=>[(0,a.Wm)("div",te,[(0,a.Wm)(f,{class:"col-12 col-md","emit-value":"",clearable:"",modelValue:e.edited_user.chairman,"onUpdate:modelValue":l[2]||(l[2]=l=>e.edited_user.chairman=l),"option-label":l=>e.userUtils.getShortFio(l),options:e.chairmans},null,8,["modelValue","option-label","options"])])])),_:1}),(0,a.Wm)(W,{align:"right"},{default:(0,a.w5)((()=>[(0,a.Wm)(p,{flat:"",label:"Изменить",color:"accent",type:"submit"})])),_:1})])),_:1},8,["onSubmit"])])),_:1})])),_:1},8,["modelValue"])],64)}var oe=s(1515);const ue=["id","username","firstName","lastName","middleName","chairman","actions"],ne=(0,a.aZ)({name:"UpdateUserChairmanTable",setup(){const e=(0,r.useStore)(),l=(0,a.Fl)((()=>e.getters["user/getUsers"])),s=(0,a.Fl)((()=>e.getters["user/getColumns"].filter((e=>ue.includes(e.name))))),t=(0,a.Fl)((()=>e.getters["user/getChairmans"])),o=(0,p.qj)(new c.n),u=(0,p.iH)(!1),n=(0,p.iH)("");function d(e){u.value=!0,o.id=e.id,o.chairman=e.chairman}function m(){e.dispatch("user/updateUserChairman",o).then((e=>{e&&(w.Z.showPositive("Председатель успешно измененн"),u.value=!1)}))}return{rows:l,columns:s,user_dialog:u,edited_user:o,chairmans:t,showEditUserDialog:d,updateUserChairman:m,ruleApi:i.Z,userUtils:oe.Z,filter:n}}});ne.render=re;const de=ne;U()(ne,"components",{QTable:C.Z,QInput:g.Z,QIcon:z.Z,QTr:S.Z,QTd:T.Z,QBtn:b.Z,QImg:F.Z,QDialog:H.Z,QCard:W.Z,QForm:h.Z,QCardSection:I.Z,QSelect:ee.Z,QCardActions:R.Z});const me=(0,a.aZ)({name:"AdminTabs",components:{UpdateUserInfoTable:j,UpdateUserPasswordTable:L,UpdateUserRolesTable:le,UpdateUserChairmanTable:de,NewUserForm:q},setup(){const e=(0,p.iH)("info"),l=(0,p.iH)(5);return{tab:e,splitterModel:l}}});var pe=s(7547),ie=s(3269),ce=s(5906),we=s(6602);me.render=u;const fe=me;U()(me,"components",{QTabs:pe.Z,QTab:ie.Z,QTabPanels:ce.Z,QTabPanel:we.Z});const We=(0,a.aZ)({name:"AdminPage",components:{AdminTabs:fe},setup(){const e=(0,r.useStore)();e.dispatch("user/getUsers")}});var he=s(4379);We.render=t;const ge=We;U()(We,"components",{QPage:he.Z})},1813:(e,l,s)=>{e.exports=s.p+"img/notFoundData.f41aaad2.gif"}}]);