(self["webpackChunkdocx"]=self["webpackChunkdocx"]||[]).push([[27],{5122:(t,e,o)=>{"use strict";o.d(e,{Z:()=>a});class n{toLocalString(t){return new Date(t||"").toLocaleString()}}const r=new n,a=r},9922:(t,e,o)=>{"use strict";o.d(e,{Z:()=>u});var n=o(6892),r=o.n(n),a=o(6490);const s={getFilenameFromHeaders(t){let e="";const o=t["Content-Disposition"]||t["content-disposition"];if(o&&-1!==o.indexOf("attachment")){const t=/filename[^;=\n]*=((['"]).*?\2|[^;\n]*)/,n=t.exec(o);null!=n&&n[1]&&(e=n[1].replace(/['"]/g,""))}return e.startsWith("UTF-8")&&(e=e.substring(5),e=decodeURIComponent(e)),e}};var l=o(4259),c=function(t,e,o,n){function r(t){return t instanceof o?t:new o((function(e){e(t)}))}return new(o||(o=Promise))((function(o,a){function s(t){try{c(n.next(t))}catch(e){a(e)}}function l(t){try{c(n["throw"](t))}catch(e){a(e)}}function c(t){t.done?o(t.value):r(t.value).then(s,l)}c((n=n.apply(t,e||[])).next())}))};class i{downloadReportById(t){return c(this,void 0,void 0,(function*(){if(t){const e=yield a.restApi.downloadReport(t);let o=s.getFilenameFromHeaders(e.headers);o||(o=`report_${(0,l.Z)()}.docx`),r()(e.data,o)}}))}downloadScoreListById(t){return c(this,void 0,void 0,(function*(){if(t){const e=yield a.restApi.downloadScoreList(t);let o=s.getFilenameFromHeaders(e.headers);o||(o=`score_list_${(0,l.Z)()}.docx`),r()(e.data,o)}}))}}const d=new i,u=d},3027:(t,e,o)=>{"use strict";o.r(e),o.d(e,{default:()=>O});var n=o(3673);function r(t,e,o,r,a,s){const l=(0,n.up)("report-table-grid"),c=(0,n.up)("q-page");return(0,n.wg)(),(0,n.j4)(c,{class:"q-pa-md"},{default:(0,n.w5)((()=>[(0,n.Wm)(l)])),_:1})}var a=o(2925),s=o(2323),l=o(1813),c=o.n(l);const i={class:"q-pa-md row items-start q-gutter-md"},d={class:"q-pa-xs col-xs-12 col-sm-6 col-md-4"},u={class:"row items-center no-wrap"},p={class:"col"},m={class:"text-h6"},w={class:"text-subtitle2"},f={class:"text-subtitle2"},g=(0,n.Uk)("Статус: "),h={class:"text-subtitle2"},v=(0,n.Uk)(" Дата создания : "),W={class:"col-auto"},b=(0,n.Uk)("Редактировать"),y=(0,n.Uk)("Скачать отчет"),x=(0,n.Uk)("Скачать оценочный лист"),Z={class:"full-width row flex-center text-accent q-gutter-sm text-h6"};function _(t,e,o,r,a,l){const _=(0,n.up)("q-icon"),k=(0,n.up)("q-input"),q=(0,n.up)("q-separator"),C=(0,n.up)("q-badge"),S=(0,n.up)("q-item-section"),R=(0,n.up)("q-item"),Q=(0,n.up)("q-list"),U=(0,n.up)("q-menu"),F=(0,n.up)("q-btn"),I=(0,n.up)("q-card-section"),B=(0,n.up)("q-card"),L=(0,n.up)("q-img"),D=(0,n.up)("q-table");return(0,n.wg)(),(0,n.j4)("div",i,[(0,n.Wm)(D,{grid:"",title:"Мои отчеты",rows:t.reports,"grid-header":"",columns:t.columns,filter:t.filter,class:"full-width","no-data-label":"у нас нет отчетов","no-results-label":"мы ничего не нашли","row-key":"id"},{"top-right":(0,n.w5)((()=>[(0,n.Wm)(k,{borderless:"",dense:"",debounce:"300",modelValue:t.filter,"onUpdate:modelValue":e[1]||(e[1]=e=>t.filter=e),placeholder:"Поиск",style:{"min-width":"250px"}},{append:(0,n.w5)((()=>[(0,n.Wm)(_,{name:"search"})])),_:1},8,["modelValue"])])),item:(0,n.w5)((e=>[(0,n.Wm)("div",d,[(0,n.Wm)(B,{class:"report_card_table_item bg-secondary",flat:"",bordered:""},{default:(0,n.w5)((()=>[(0,n.Wm)(I,null,{default:(0,n.w5)((()=>[(0,n.Wm)("div",u,[(0,n.Wm)("div",p,[(0,n.Wm)("div",m,"Название: "+(0,s.zw)(e.row.reportName),1),(0,n.Wm)(q,{class:"q-my-sm"}),(0,n.Wm)("div",w,"Автор: "+(0,s.zw)(t.userUtils.getShortFio(e.row.author)),1),(0,n.Wm)("div",f,[g,(0,n.Wm)(C,{color:t.getColorByStatus(e.row.status)},{default:(0,n.w5)((()=>[(0,n.Uk)((0,s.zw)(e.row.status),1)])),_:2},1032,["color"])]),(0,n.Wm)("div",h,[v,(0,n.Wm)("b",null,(0,s.zw)(t.dateUtils.toLocalString(e.row.createdDate)),1)])]),(0,n.Wm)("div",W,[(0,n.Wm)(F,{color:"grey-7",round:"",flat:"",icon:"more_vert"},{default:(0,n.w5)((()=>[(0,n.Wm)(U,{cover:"","auto-close":""},{default:(0,n.w5)((()=>[(0,n.Wm)(Q,null,{default:(0,n.w5)((()=>["UNCHECKED"===e.row.status?((0,n.wg)(),(0,n.j4)(R,{key:0,clickable:"",onClick:o=>t.editReport(e.row.id)},{default:(0,n.w5)((()=>[(0,n.Wm)(S,null,{default:(0,n.w5)((()=>[b])),_:1})])),_:2},1032,["onClick"])):(0,n.ry)("",!0),(0,n.Wm)(R,{clickable:"",onClick:o=>t.downloadReport(e.row.id)},{default:(0,n.w5)((()=>[(0,n.Wm)(S,null,{default:(0,n.w5)((()=>[y])),_:1})])),_:2},1032,["onClick"]),(0,n.Wm)(R,{clickable:"",onClick:o=>t.downloadScoreList(e.row.id)},{default:(0,n.w5)((()=>[(0,n.Wm)(S,null,{default:(0,n.w5)((()=>[x])),_:1})])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)])),_:2},1024)])])])),_:2},1024)])),_:2},1024)])])),"no-data":(0,n.w5)((({message:t})=>[(0,n.Wm)("div",Z,[(0,n.Wm)(L,{src:c(),style:{width:"64px",height:"64px"}}),(0,n.Wm)("span",null,[(0,n.Wm)("b",null,"Так ужасно что ... "+(0,s.zw)(t),1)])])])),_:1},8,["rows","columns","filter"])])}var k=o(1959),q=o(9582),C=o(9922),S=o(5122),R=o(1515);const Q=(0,n.aZ)({name:"ReportTableGrid",components:{},setup(){const t=(0,a.useStore)(),e=(0,q.tv)(),o=(0,n.Fl)((()=>t.getters["report/getReports"])),r=(0,n.Fl)((()=>t.getters["report/getColumns"])),s=(0,n.Fl)((()=>t.getters["report/getColorByStatus"])),l=(0,k.iH)(""),c=(0,k.iH)(!1);function i(t){C.Z.downloadReportById(t)}function d(t){C.Z.downloadScoreListById(t)}function u(o){t.dispatch("report/fetchReportByIdAndSetTablesData",o).then((t=>{t&&e.push("createReport")}))}return{filter:l,reports:o,columns:r,editReport:u,dateUtils:S.Z,userUtils:R.Z,expanded:c,getColorByStatus:s,downloadReport:i,downloadScoreList:d}}});var U=o(6429),F=o(4842),I=o(4554),B=o(151),L=o(5589),D=o(5869),H=o(9721),z=o(8240),T=o(6335),P=o(7011),j=o(3414),A=o(2035),V=o(4027),E=o(7518),G=o.n(E);Q.render=_;const M=Q;G()(Q,"components",{QTable:U.Z,QInput:F.Z,QIcon:I.Z,QCard:B.Z,QCardSection:L.Z,QSeparator:D.Z,QBadge:H.Z,QBtn:z.Z,QMenu:T.Z,QList:P.Z,QItem:j.Z,QItemSection:A.Z,QImg:V.Z});var N=function(t,e,o,n){function r(t){return t instanceof o?t:new o((function(e){e(t)}))}return new(o||(o=Promise))((function(o,a){function s(t){try{c(n.next(t))}catch(e){a(e)}}function l(t){try{c(n["throw"](t))}catch(e){a(e)}}function c(t){t.done?o(t.value):r(t.value).then(s,l)}c((n=n.apply(t,e||[])).next())}))};const $=(0,n.aZ)({name:"MyReportsPage",components:{ReportTableGrid:M},setup(){const t=(0,a.useStore)();function e(){return N(this,void 0,void 0,(function*(){yield t.dispatch("report/fetchReports")}))}return(0,n.bv)(e),{}}});var K=o(4379);$.render=r;const O=$;G()($,"components",{QPage:K.Z})},1813:(t,e,o)=>{t.exports=o.p+"img/notFoundData.f41aaad2.gif"}}]);